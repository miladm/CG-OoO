\hypertarget{listSchedule_8h}{
\section{/home/milad/esc\_\-project/svn/PARS/src/binaryTranslator/listSchedule.h File Reference}
\label{listSchedule_8h}\index{/home/milad/esc\_\-project/svn/PARS/src/binaryTranslator/listSchedule.h@{/home/milad/esc\_\-project/svn/PARS/src/binaryTranslator/listSchedule.h}}
}
{\ttfamily \#include \char`\"{}basicblock.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}instruction.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}list.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}quickSort.h\char`\"{}}\par
Include dependency graph for listSchedule.h:
This graph shows which files directly or indirectly include this file:
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{listSchedule_8h_af9a47861fb738dfb09aa240667f01b1e}{listSchedule} (\hyperlink{classbasicblock}{basicblock} $\ast$bb)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{listSchedule_8h_af9a47861fb738dfb09aa240667f01b1e}{
\index{listSchedule.h@{listSchedule.h}!listSchedule@{listSchedule}}
\index{listSchedule@{listSchedule}!listSchedule.h@{listSchedule.h}}
\subsubsection[{listSchedule}]{\setlength{\rightskip}{0pt plus 5cm}void listSchedule (
\begin{DoxyParamCaption}
\item[{{\bf basicblock} $\ast$}]{bb}
\end{DoxyParamCaption}
)}}
\label{listSchedule_8h_af9a47861fb738dfb09aa240667f01b1e}

\begin{DoxyCode}
                                  {
        List<instruction*> *sortList      = new List<instruction*>;
        List<instruction*> *listSchList   = new List<instruction*>;
        List<instruction*> *toBeSchedList = new List<instruction*>;
        List<instruction*> *insList       = bb->getInsList();
        set<ADDR> scheduledIns;
        bool scheduleIt = false;
        // Replicate the BB instruction list
        for (int i = 0; i < insList->NumElements(); i++) {
                insList->Nth(i)->resetLongestPath(); //Added to alow Phraesblock 
      listscheduling (not useful for BB-list scheduling)
                sortList->Append(insList->Nth(i));
        }
        // Find the longest path for every instruction in BB
        for (int i = sortList->NumElements()-1; i >= 0; i--) {
                int lp = findLongestPath(sortList->Nth(i), bb);
                sortList->Nth(i)->setLongestPath(lp);
                // printf("lp for ins %llu: %d\n", sortList->Nth(i)->getInsAddr()
      , lp);
    }
        // printf("\n");
        // Sort instruction list based on critical path length (high to low)
        quicksortLongestPath(sortList,0,sortList->NumElements()-1);
        // List schedule instructions based on their data-dependency chains.
        while (sortList->NumElements() != scheduledIns.size()) {
                int scheduleCounter = 0;
            for (int i = 0; i < sortList->NumElements() && scheduleCounter < 
      NUM_EU; i++) {
                        instruction* ins = sortList->Nth(i);
                        if (scheduledIns.find(ins->getInsAddr()) != scheduledIns.
      end()) continue;
                        List<instruction*>* ancestors = ins->getAncestors();
                        scheduleIt = true;
                        for (int j = 0; j < ancestors->NumElements(); j++) {
                                instruction* anc = ancestors->Nth(j);
                                if (bb->isInsAddrInBB(anc->getInsAddr()) == true 
      &&
                                    scheduledIns.find(anc->getInsAddr()) == sched
      uledIns.end()) {
                                                // printf("hey ");
                                                scheduleIt = false;
                                                continue;
                                }
                        }
                        // printf("\n");
                        if (scheduleIt == true) {
                                listSchList->Append(ins);
                                toBeSchedList->Append(ins);
                                scheduleCounter++;
                        }
            }
                // printf("To SChedule #: %d\n", toBeSchedList->NumElements());
                for (int i = 0; i < toBeSchedList->NumElements(); i++)
                        scheduledIns.insert(toBeSchedList->Nth(i)->getInsAddr());
      
                toBeSchedList->RemoveAll();
        }
        // Store the list-scheduled list to BB class
    for (int i = 0; i < listSchList->NumElements(); i++) {
                bb->addToBB_ListSchedule(listSchList->Nth(i));
                // printf("lp for ins %llu: %d\n", listSchList->Nth(i)->getInsAdd
      r(), listSchList->Nth(i)->getLongestPath());
    }
        // printf("\n---------\n");
        delete toBeSchedList;
        delete listSchList;
        delete sortList;
}
\end{DoxyCode}


Here is the call graph for this function:




Here is the caller graph for this function:


