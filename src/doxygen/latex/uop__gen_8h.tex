\hypertarget{uop__gen_8h}{
\section{/home/milad/esc\_\-project/svn/PARS/src/frontend/uop\_\-gen.h File Reference}
\label{uop__gen_8h}\index{/home/milad/esc\_\-project/svn/PARS/src/frontend/uop\_\-gen.h@{/home/milad/esc\_\-project/svn/PARS/src/frontend/uop\_\-gen.h}}
}
{\ttfamily \#include $<$stdio.h$>$}\par
{\ttfamily \#include \char`\"{}pin.H\char`\"{}}\par
{\ttfamily \#include \char`\"{}xed-\/interface.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}pin\_\-isa.H\char`\"{}}\par
{\ttfamily \#include \char`\"{}instlib.H\char`\"{}}\par
{\ttfamily \#include $<$iostream$>$}\par
{\ttfamily \#include $<$fstream$>$}\par
{\ttfamily \#include $<$map$>$}\par
{\ttfamily \#include $<$string.h$>$}\par
{\ttfamily \#include $<$string$>$}\par
{\ttfamily \#include \char`\"{}../global/g\_\-variable.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}../global/global.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}staticCodeParser.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}../backend/unit/dynInstruction.h\char`\"{}}\par
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{uop__gen_8h_a6e258f8f019fd3f67349d3288677d2b3}{uop\_\-gen} (FILE $\ast$\_\-outFile, \hyperlink{classstaticCodeParser}{staticCodeParser} \&\hyperlink{pars_8cpp_ae1f49acdc02bc860091a9c0826042e9a}{g\_\-staticCode})
\item 
void \hyperlink{uop__gen_8h_a6b129244e191a3f59375a31842557abd}{get\_\-uop} (INS ins)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{uop__gen_8h_a6b129244e191a3f59375a31842557abd}{
\index{uop\_\-gen.h@{uop\_\-gen.h}!get\_\-uop@{get\_\-uop}}
\index{get\_\-uop@{get\_\-uop}!uop_gen.h@{uop\_\-gen.h}}
\subsubsection[{get\_\-uop}]{\setlength{\rightskip}{0pt plus 5cm}void get\_\-uop (
\begin{DoxyParamCaption}
\item[{INS}]{ins}
\end{DoxyParamCaption}
)}}
\label{uop__gen_8h_a6b129244e191a3f59375a31842557abd}

\begin{DoxyCode}
                       {
    if (INS_IsBranchOrCall (ins) || INS_IsFarRet (ins) || INS_IsRet (ins)) {
        INS_InsertCall (ins, IPOINT_TAKEN_BRANCH, (AFUNPTR) getBrIns,
                IARG_ADDRINT, INS_Address (ins),
                IARG_BOOL, INS_HasFallThrough (ins),
                IARG_BRANCH_TARGET_ADDR, 
                IARG_FALLTHROUGH_ADDR,
                IARG_BRANCH_TAKEN,
                IARG_BOOL, INS_IsCall (ins) || INS_IsFarCall (ins),
                IARG_BOOL, INS_IsRet (ins) || INS_IsFarRet (ins),
                IARG_BOOL, INS_IsDirectFarJump (ins) || INS_IsFarJump (ins) || (I
      NS_IsBranch (ins) && INS_HasFallThrough (ins)),
                IARG_BOOL, INS_IsDirectFarJump (ins) || INS_IsDirectBranchOrCall 
      (ins),
                IARG_END);
        /*
        //capture mem u-op
        if (INS_IsMemoryWrite (ins) || INS_IsMemoryRead (ins)) {
        INS_InsertCall (ins, IPOINT_BEFORE, (AFUNPTR) getMemIns,
        IARG_ADDRINT, INS_Address (ins),
        IARG_MEMORYWRITE_SIZE,
        IARG_MEMORYWRITE_EA,
        IARG_END);
        }
        */
    } else if (INS_IsMemoryWrite (ins)) {
        BOOL isMemRead;
        isMemRead = false;
        INS_InsertCall (ins, IPOINT_BEFORE, (AFUNPTR) getMemIns,
                IARG_ADDRINT, INS_Address (ins),
                IARG_MEMORYWRITE_SIZE,
                IARG_MEMORYWRITE_EA,
                IARG_BOOL, INS_IsStackRead (ins),
                IARG_BOOL, INS_IsStackWrite (ins),
                IARG_BOOL, isMemRead,
                IARG_END);
    } else if (INS_IsMemoryRead (ins)) {
        bool isMemRead;
        isMemRead = true;
        INS_InsertCall (ins, IPOINT_BEFORE, (AFUNPTR) getMemIns,
                IARG_ADDRINT, INS_Address (ins),
                IARG_MEMORYREAD_SIZE,
                IARG_MEMORYREAD_EA,
                IARG_BOOL, INS_IsStackRead (ins),
                IARG_BOOL, INS_IsStackWrite (ins),
                IARG_BOOL, isMemRead,
                IARG_END);
    } else if (INS_IsNop (ins)) {
        INS_InsertCall (ins, IPOINT_BEFORE, (AFUNPTR) getNopIns,
                IARG_ADDRINT, INS_Address (ins),
                IARG_END);
    } else {
        INS_InsertCall (ins, IPOINT_BEFORE, (AFUNPTR) getIns,
                IARG_ADDRINT, INS_Address (ins),
                IARG_END);
        /*
        //capture mem u-op
        if (INS_IsMemoryWrite (ins) || INS_IsMemoryRead (ins)) {
        INS_InsertCall (ins, IPOINT_BEFORE, (AFUNPTR) getMemIns,
        IARG_ADDRINT, INS_Address (ins),
        IARG_MEMORYWRITE_SIZE,
        IARG_MEMORYWRITE_EA,
        IARG_END);
        */
    }
}
\end{DoxyCode}
\hypertarget{uop__gen_8h_a6e258f8f019fd3f67349d3288677d2b3}{
\index{uop\_\-gen.h@{uop\_\-gen.h}!uop\_\-gen@{uop\_\-gen}}
\index{uop\_\-gen@{uop\_\-gen}!uop_gen.h@{uop\_\-gen.h}}
\subsubsection[{uop\_\-gen}]{\setlength{\rightskip}{0pt plus 5cm}void uop\_\-gen (
\begin{DoxyParamCaption}
\item[{FILE $\ast$}]{\_\-outFile, }
\item[{{\bf staticCodeParser} \&}]{g\_\-staticCode}
\end{DoxyParamCaption}
)}}
\label{uop__gen_8h_a6e258f8f019fd3f67349d3288677d2b3}

\begin{DoxyCode}
{
    // Write to a file since cout and cerr maybe closed by the application
    memOp = 0;
    aluOp = 0;
    fpOp = 0;
    //if (logEnable) out = fopen ("trace_nbody.out", "w");
    out1 = _outFile;
    _g_staticCode = &g_staticCode;

    // Initialize pin & symbol manager
    // Register EmulateLoad to be called to instrument instructions
    //IMG_AddInstrumentFunction (SI_Img, 0);
    //PIN_AddFiniFunction (Fini, 0);
}
\end{DoxyCode}
