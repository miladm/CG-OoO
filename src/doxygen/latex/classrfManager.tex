\hypertarget{classrfManager}{
\section{rfManager Class Reference}
\label{classrfManager}\index{rfManager@{rfManager}}
}


{\ttfamily \#include $<$rfManager.h$>$}



Inheritance diagram for rfManager:


Collaboration diagram for rfManager:
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classrfManager_ae3bf65fd10a88642a5599e9dc1f99a43}{rfManager} (\hyperlink{classsysClock}{sysClock} $\ast$, const \hyperlink{classYAML_1_1Node}{YAML::Node} \&, string rf\_\-name=\char`\"{}rfManager\char`\"{})
\item 
\hyperlink{classrfManager_adc5fb894c52570de06137128a65256e3}{$\sim$rfManager} ()
\item 
void \hyperlink{classrfManager_aca3886ea56db6dd13b096be05adee188}{resetRF} ()
\item 
bool \hyperlink{classrfManager_ab5c5242744de56fd2f46c11ac3d9472b}{isReady} (\hyperlink{classdynInstruction}{dynInstruction} $\ast$ins)
\item 
bool \hyperlink{classrfManager_a4d9ef9cb740f57a058efe2ffe3eb9554}{checkReadyAgain} (\hyperlink{classdynInstruction}{dynInstruction} $\ast$ins)
\item 
void \hyperlink{classrfManager_ab38c1244739ba189161c3026361464ec}{reserveRF} (\hyperlink{classdynInstruction}{dynInstruction} $\ast$ins)
\item 
bool \hyperlink{classrfManager_a487ae2b2c425f4a15a6ee49fe37d5afd}{canReserveRF} (\hyperlink{classdynInstruction}{dynInstruction} $\ast$ins)
\item 
void \hyperlink{classrfManager_ae5dc11fc5a35d9985601f94e0176d32d}{writeToRF} (\hyperlink{classdynInstruction}{dynInstruction} $\ast$ins)
\item 
void \hyperlink{classrfManager_ab33692b15e37a769b418bb528473ce2f}{getStat} ()
\item 
bool \hyperlink{classrfManager_a77cd0079b7bfe9be500a308e7464682e}{hasFreeWire} (\hyperlink{binaryTranslator_2global_8h_a94b8423a23b95a7adac22848b81e7c0c}{AXES\_\-TYPE}, \hyperlink{global_2global_8h_a6fa2e24b8a418fa215e183264cbea3aa}{WIDTH})
\item 
void \hyperlink{classrfManager_a9f6656aaab40c1eade70613096ca66f0}{updateWireState} (\hyperlink{binaryTranslator_2global_8h_a94b8423a23b95a7adac22848b81e7c0c}{AXES\_\-TYPE}, \hyperlink{global_2global_8h_a6fa2e24b8a418fa215e183264cbea3aa}{WIDTH}, bool=false, bool=false)
\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classrfManager_ae3bf65fd10a88642a5599e9dc1f99a43}{
\index{rfManager@{rfManager}!rfManager@{rfManager}}
\index{rfManager@{rfManager}!rfManager@{rfManager}}
\subsubsection[{rfManager}]{\setlength{\rightskip}{0pt plus 5cm}rfManager::rfManager (
\begin{DoxyParamCaption}
\item[{{\bf sysClock} $\ast$}]{clk, }
\item[{const {\bf YAML::Node} \&}]{root, }
\item[{string}]{rf\_\-name = {\ttfamily \char`\"{}rfManager\char`\"{}}}
\end{DoxyParamCaption}
)}}
\label{classrfManager_ae3bf65fd10a88642a5599e9dc1f99a43}

\begin{DoxyCode}
    : unit (rf_name, clk),
      _RF (clk, root, "registerFile"),
      _e_table (rf_name, root),
      s_rf_not_ready_cnt (g_stats.newScalarStat (rf_name, "rf_not_ready_cnt", "Nu
      mber of RF operand-not-ready events", 0, PRINT_ZERO)),
      s_lrf_busy_cnt (g_stats.newScalarStat (rf_name, "rf_busy_cnt", "Number of L
      RF write operand-not-ready events", 0, PRINT_ZERO)),
      s_unavailable_cnt (g_stats.newScalarStat (rf_name, "unavailable_cnt", "Numb
      er of unavailable wire accesses", 0, NO_PRINT_ZERO))
{ }
\end{DoxyCode}
\hypertarget{classrfManager_adc5fb894c52570de06137128a65256e3}{
\index{rfManager@{rfManager}!$\sim$rfManager@{$\sim$rfManager}}
\index{$\sim$rfManager@{$\sim$rfManager}!rfManager@{rfManager}}
\subsubsection[{$\sim$rfManager}]{\setlength{\rightskip}{0pt plus 5cm}rfManager::$\sim$rfManager (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classrfManager_adc5fb894c52570de06137128a65256e3}

\begin{DoxyCode}
{ }
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classrfManager_a487ae2b2c425f4a15a6ee49fe37d5afd}{
\index{rfManager@{rfManager}!canReserveRF@{canReserveRF}}
\index{canReserveRF@{canReserveRF}!rfManager@{rfManager}}
\subsubsection[{canReserveRF}]{\setlength{\rightskip}{0pt plus 5cm}bool rfManager::canReserveRF (
\begin{DoxyParamCaption}
\item[{{\bf dynInstruction} $\ast$}]{ins}
\end{DoxyParamCaption}
)}}
\label{classrfManager_a487ae2b2c425f4a15a6ee49fe37d5afd}

\begin{DoxyCode}
                                                 {
    List<AR>* a_wrReg_list = ins->getARwrList ();
    for (int i = 0; i < a_wrReg_list->NumElements (); i++) {
        AR reg = a_wrReg_list->Nth (i);
        if (_RF.isRegBusy (reg)) {
            s_lrf_busy_cnt++;
            return false; /* OPERAND NOT AVAILABLE FOR WRITE */
        }
    }
    return true;
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_a4d9ef9cb740f57a058efe2ffe3eb9554}{
\index{rfManager@{rfManager}!checkReadyAgain@{checkReadyAgain}}
\index{checkReadyAgain@{checkReadyAgain}!rfManager@{rfManager}}
\subsubsection[{checkReadyAgain}]{\setlength{\rightskip}{0pt plus 5cm}bool rfManager::checkReadyAgain (
\begin{DoxyParamCaption}
\item[{{\bf dynInstruction} $\ast$}]{ins}
\end{DoxyParamCaption}
)}}
\label{classrfManager_a4d9ef9cb740f57a058efe2ffe3eb9554}

\begin{DoxyCode}
                                                    {
    List<AR>* a_rdReg_list = ins->getARrdList ();
    for (int i = a_rdReg_list->NumElements () - 1; i >= 0; i--) {
        AR reg = a_rdReg_list->Nth (i);
        if (!_RF.isRegValidAndReady (reg)) {
            dbg.print (DBG_REG_FILES, "%s: %s %d %s (cyc: %d)\n", _c_name.c_str (
      ), 
                    "Reg", reg, "is invlid in RF", _clk->now ());
            return false; /* OPERAND NOT AVAILABLE */
        }
    }

    if (a_rdReg_list->NumElements () == 0) {
        dbg.print (DBG_REG_FILES, "%s: %s %d %s (cyc: %d)\n", _c_name.c_str (), 
                "RF operand of ins", ins->getInsID (), "are ready", _clk->now ())
      ;
        return true; /* ALL OPERANDS AVAILABLE */
    }

    dbg.print (DBG_L_REG_FILES, "%s: %s %d s (cyc: %d)\n", _c_name.c_str (), 
            "RF operand of ins", ins->getInsID (), "are ready", _clk->now ());
    return false; /* NOT ALL OPERANDS AVAILABLE */
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_ab33692b15e37a769b418bb528473ce2f}{
\index{rfManager@{rfManager}!getStat@{getStat}}
\index{getStat@{getStat}!rfManager@{rfManager}}
\subsubsection[{getStat}]{\setlength{\rightskip}{0pt plus 5cm}void rfManager::getStat (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classrfManager_ab33692b15e37a769b418bb528473ce2f}

\begin{DoxyCode}
                         {
}
\end{DoxyCode}
\hypertarget{classrfManager_a77cd0079b7bfe9be500a308e7464682e}{
\index{rfManager@{rfManager}!hasFreeWire@{hasFreeWire}}
\index{hasFreeWire@{hasFreeWire}!rfManager@{rfManager}}
\subsubsection[{hasFreeWire}]{\setlength{\rightskip}{0pt plus 5cm}bool rfManager::hasFreeWire (
\begin{DoxyParamCaption}
\item[{{\bf AXES\_\-TYPE}}]{axes\_\-type, }
\item[{{\bf WIDTH}}]{numRegWires}
\end{DoxyParamCaption}
)}}
\label{classrfManager_a77cd0079b7bfe9be500a308e7464682e}

\begin{DoxyCode}
                                                                   {
    if (_RF.getNumFreeWires (axes_type) >= numRegWires) {
        return true;
    } else {
        s_unavailable_cnt++;
        return false;
    }
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_ab5c5242744de56fd2f46c11ac3d9472b}{
\index{rfManager@{rfManager}!isReady@{isReady}}
\index{isReady@{isReady}!rfManager@{rfManager}}
\subsubsection[{isReady}]{\setlength{\rightskip}{0pt plus 5cm}bool rfManager::isReady (
\begin{DoxyParamCaption}
\item[{{\bf dynInstruction} $\ast$}]{ins}
\end{DoxyParamCaption}
)}}
\label{classrfManager_ab5c5242744de56fd2f46c11ac3d9472b}

\begin{DoxyCode}
                                            {
    List<AR>* a_rdReg_list = ins->getARrdList ();
    for (int i = a_rdReg_list->NumElements () - 1; i >= 0; i--) {
        AR reg = a_rdReg_list->Nth (i);
        if (!_RF.isRegValidAndReady (reg)) {
            dbg.print (DBG_REG_FILES, "%s: %s %d %s (cyc: %d)\n", _c_name.c_str (
      ), 
                    "Reg", reg, "is invlid in RF", _clk->now ());
            s_rf_not_ready_cnt++;
            return false; /* operand not available */
        } else {
            a_rdReg_list->RemoveAt (i); /*optimization */
        }
    }

    if (a_rdReg_list->NumElements () == 0) {
        _e_table.ramAccess (ins->getTotNumRdAR ());
        dbg.print (DBG_REG_FILES, "%s: %s %d %s (cyc: %d)\n", _c_name.c_str (), 
                "RF operand of ins", ins->getInsID (), "are ready", _clk->now ())
      ;
        return true; /* all operands available */
    }

    s_rf_not_ready_cnt++;
    dbg.print (DBG_L_REG_FILES, "%s: %s %d s (cyc: %d)\n", _c_name.c_str (), 
            "RF operand of ins", ins->getInsID (), "are ready", _clk->now ());
    return false; /* not all operands available */
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_ab38c1244739ba189161c3026361464ec}{
\index{rfManager@{rfManager}!reserveRF@{reserveRF}}
\index{reserveRF@{reserveRF}!rfManager@{rfManager}}
\subsubsection[{reserveRF}]{\setlength{\rightskip}{0pt plus 5cm}void rfManager::reserveRF (
\begin{DoxyParamCaption}
\item[{{\bf dynInstruction} $\ast$}]{ins}
\end{DoxyParamCaption}
)}}
\label{classrfManager_ab38c1244739ba189161c3026361464ec}

\begin{DoxyCode}
                                              {
    List<AR>* a_wrReg_list = ins->getARwrList ();
    for (int i = 0; i < a_wrReg_list->NumElements (); i++) {
        AR reg = a_wrReg_list->Nth (i);
        _RF.reserveReg (reg);
    }
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_aca3886ea56db6dd13b096be05adee188}{
\index{rfManager@{rfManager}!resetRF@{resetRF}}
\index{resetRF@{resetRF}!rfManager@{rfManager}}
\subsubsection[{resetRF}]{\setlength{\rightskip}{0pt plus 5cm}void rfManager::resetRF (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classrfManager_aca3886ea56db6dd13b096be05adee188}

\begin{DoxyCode}
                         {
    _RF.resetRF ();
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_a9f6656aaab40c1eade70613096ca66f0}{
\index{rfManager@{rfManager}!updateWireState@{updateWireState}}
\index{updateWireState@{updateWireState}!rfManager@{rfManager}}
\subsubsection[{updateWireState}]{\setlength{\rightskip}{0pt plus 5cm}void rfManager::updateWireState (
\begin{DoxyParamCaption}
\item[{{\bf AXES\_\-TYPE}}]{axes\_\-type, }
\item[{{\bf WIDTH}}]{numRegWires, }
\item[{bool}]{update\_\-wire = {\ttfamily false}, }
\item[{bool}]{cache\_\-access = {\ttfamily false}}
\end{DoxyParamCaption}
)}}
\label{classrfManager_a9f6656aaab40c1eade70613096ca66f0}

\begin{DoxyCode}
                                                                                 
                                 {
    list<string> wires;
    if (update_wire) {
        if (axes_type == READ) {
            wires.push_back ("e_w_eu2simplerf");
        } else if (axes_type == WRITE) {
            wires.push_back ("e_w_eu2simplerf");
        }
        if (cache_access) {
            wires.push_back ("e_w_cache2rf");
        }
    }

    for (WIDTH i = 0; i < numRegWires; i++) {
        _RF.updateWireState (axes_type, wires, update_wire);
    }
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classrfManager_ae5dc11fc5a35d9985601f94e0176d32d}{
\index{rfManager@{rfManager}!writeToRF@{writeToRF}}
\index{writeToRF@{writeToRF}!rfManager@{rfManager}}
\subsubsection[{writeToRF}]{\setlength{\rightskip}{0pt plus 5cm}void rfManager::writeToRF (
\begin{DoxyParamCaption}
\item[{{\bf dynInstruction} $\ast$}]{ins}
\end{DoxyParamCaption}
)}}
\label{classrfManager_ae5dc11fc5a35d9985601f94e0176d32d}

\begin{DoxyCode}
                                              {
    List<AR>* a_wrReg_list = ins->getARwrList ();
    for (int i = 0; i < a_wrReg_list->NumElements (); i++) {
        AR reg = a_wrReg_list->Nth (i);
        _RF.updateReg (reg);
        _e_table.ramAccess ();
    }
}
\end{DoxyCode}


Here is the call graph for this function:




The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/home/milad/esc\_\-project/svn/PARS/src/backend/ino/\hyperlink{ino_2rfManager_8h}{rfManager.h}\item 
/home/milad/esc\_\-project/svn/PARS/src/backend/ino/\hyperlink{ino_2rfManager_8cpp}{rfManager.cpp}\end{DoxyCompactItemize}
