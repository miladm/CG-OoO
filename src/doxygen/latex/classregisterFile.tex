\hypertarget{classregisterFile}{
\section{registerFile Class Reference}
\label{classregisterFile}\index{registerFile@{registerFile}}
}


{\ttfamily \#include $<$registerFile.h$>$}



Inheritance diagram for registerFile:


Collaboration diagram for registerFile:
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classregisterFile_a61390ea0709a40a1e48dac5133242c9d}{registerFile} (\hyperlink{classsysClock}{sysClock} $\ast$, const \hyperlink{classYAML_1_1Node}{YAML::Node} \&, string rf\_\-name)
\item 
\hyperlink{classregisterFile_a51d44388ce9baf55f5d0fc108198d915}{$\sim$registerFile} ()
\item 
void \hyperlink{classregisterFile_a57aa14508810da286ee60ef6cd033d6b}{updateReg} (\hyperlink{global_2global_8h_a54dcae2ba04c76c12afe113b706bd4dc}{PR} reg)
\item 
void \hyperlink{classregisterFile_a2731695462957c3ac0a8888e7fce3bd3}{reserveReg} (\hyperlink{global_2global_8h_a54dcae2ba04c76c12afe113b706bd4dc}{PR} reg)
\item 
bool \hyperlink{classregisterFile_a6b9481a788749aabdc8488f60adb5cf7}{isRegValidAndReady} (\hyperlink{global_2global_8h_a54dcae2ba04c76c12afe113b706bd4dc}{PR} reg)
\item 
bool \hyperlink{classregisterFile_af4bc17e8db0bd9a07fec85814e1d607f}{isRegBusy} (\hyperlink{global_2global_8h_a54dcae2ba04c76c12afe113b706bd4dc}{PR} regNum)
\item 
void \hyperlink{classregisterFile_a9e487acbcecb5a905a4ee1c80adf48e4}{resetRF} ()
\item 
void \hyperlink{classregisterFile_a47232ba732ea081d78cd43d0564e60a1}{updateWireState} (\hyperlink{binaryTranslator_2global_8h_a94b8423a23b95a7adac22848b81e7c0c}{AXES\_\-TYPE}, list$<$ string $>$ wire\_\-name=list$<$ string $>$(), bool update\_\-wire=false)
\item 
bool \hyperlink{classregisterFile_a218ab11def5221efa38b4fb84817c4a6}{hasFreeWire} (\hyperlink{binaryTranslator_2global_8h_a94b8423a23b95a7adac22848b81e7c0c}{AXES\_\-TYPE})
\item 
\hyperlink{global_2global_8h_a6fa2e24b8a418fa215e183264cbea3aa}{WIDTH} \hyperlink{classregisterFile_ad2643ae67021e5dc1a2218b19093bdd0}{getNumFreeWires} (\hyperlink{binaryTranslator_2global_8h_a94b8423a23b95a7adac22848b81e7c0c}{AXES\_\-TYPE})
\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classregisterFile_a61390ea0709a40a1e48dac5133242c9d}{
\index{registerFile@{registerFile}!registerFile@{registerFile}}
\index{registerFile@{registerFile}!registerFile@{registerFile}}
\subsubsection[{registerFile}]{\setlength{\rightskip}{0pt plus 5cm}registerFile::registerFile (
\begin{DoxyParamCaption}
\item[{{\bf sysClock} $\ast$}]{clk, }
\item[{const {\bf YAML::Node} \&}]{root, }
\item[{string}]{rf\_\-name}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a61390ea0709a40a1e48dac5133242c9d}

\begin{DoxyCode}
    : unit (rf_name, clk),
      _wr_port (WRITE, clk, root, rf_name + ".wr_wire"),
      _rd_port (READ, clk, root, rf_name + ".rd_wire")
{
    /* SETUP REGISTER DIMENSIONS */
    root["rf_size"] >> _rf_size;
    root["rf_lo"] >> _rf_begin_num;
    root["rf_hi"] >> _rf_end_num;

    WIDTH rd_wire_cnt, wr_wire_cnt;
    root["rd_wire_cnt"] >> rd_wire_cnt;
    root["wr_wire_cnt"] >> wr_wire_cnt;

    Assert (_rf_size > 0);
    Assert (rd_wire_cnt == RD_TO_WR_WIRE_CNT_RATIO * wr_wire_cnt && 
            "Must have twice as many read ports than write ports.");
    for (PR i = _rf_begin_num; i < _rf_end_num; i++) {
        registerElement* reg = new registerElement (i);
        _RF.insert (pair<PR, registerElement*> (i, reg));
    }
    _cycle = START_CYCLE;
}
\end{DoxyCode}
\hypertarget{classregisterFile_a51d44388ce9baf55f5d0fc108198d915}{
\index{registerFile@{registerFile}!$\sim$registerFile@{$\sim$registerFile}}
\index{$\sim$registerFile@{$\sim$registerFile}!registerFile@{registerFile}}
\subsubsection[{$\sim$registerFile}]{\setlength{\rightskip}{0pt plus 5cm}registerFile::$\sim$registerFile (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a51d44388ce9baf55f5d0fc108198d915}

\begin{DoxyCode}
                             {
    map <PR, registerElement*>::iterator it;
    for (it = _RF.begin (); it != _RF.end (); it++) {
        delete it->second;
    }
}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classregisterFile_ad2643ae67021e5dc1a2218b19093bdd0}{
\index{registerFile@{registerFile}!getNumFreeWires@{getNumFreeWires}}
\index{getNumFreeWires@{getNumFreeWires}!registerFile@{registerFile}}
\subsubsection[{getNumFreeWires}]{\setlength{\rightskip}{0pt plus 5cm}{\bf WIDTH} registerFile::getNumFreeWires (
\begin{DoxyParamCaption}
\item[{{\bf AXES\_\-TYPE}}]{axes\_\-type}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_ad2643ae67021e5dc1a2218b19093bdd0}

\begin{DoxyCode}
                                                        {
    if (axes_type == READ)
        return _rd_port.getNumFreeWires ();
    else
        return _wr_port.getNumFreeWires ();
}
\end{DoxyCode}


Here is the call graph for this function:




Here is the caller graph for this function:


\hypertarget{classregisterFile_a218ab11def5221efa38b4fb84817c4a6}{
\index{registerFile@{registerFile}!hasFreeWire@{hasFreeWire}}
\index{hasFreeWire@{hasFreeWire}!registerFile@{registerFile}}
\subsubsection[{hasFreeWire}]{\setlength{\rightskip}{0pt plus 5cm}bool registerFile::hasFreeWire (
\begin{DoxyParamCaption}
\item[{{\bf AXES\_\-TYPE}}]{axes\_\-type}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a218ab11def5221efa38b4fb84817c4a6}

\begin{DoxyCode}
                                                   {
    if (axes_type == READ)
        return _rd_port.hasFreeWire ();
    else
        return _wr_port.hasFreeWire ();
}
\end{DoxyCode}


Here is the call graph for this function:


\hypertarget{classregisterFile_af4bc17e8db0bd9a07fec85814e1d607f}{
\index{registerFile@{registerFile}!isRegBusy@{isRegBusy}}
\index{isRegBusy@{isRegBusy}!registerFile@{registerFile}}
\subsubsection[{isRegBusy}]{\setlength{\rightskip}{0pt plus 5cm}bool registerFile::isRegBusy (
\begin{DoxyParamCaption}
\item[{{\bf PR}}]{regNum}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_af4bc17e8db0bd9a07fec85814e1d607f}

\begin{DoxyCode}
                                    {
#ifdef ASSERTION
        Assert (reg >= _rf_begin_num && reg <= _rf_end_num);
#endif

    return (_RF[reg]->_reg_state == WAIT_ON_WRITE_REG ? true : false);
}
\end{DoxyCode}


Here is the caller graph for this function:


\hypertarget{classregisterFile_a6b9481a788749aabdc8488f60adb5cf7}{
\index{registerFile@{registerFile}!isRegValidAndReady@{isRegValidAndReady}}
\index{isRegValidAndReady@{isRegValidAndReady}!registerFile@{registerFile}}
\subsubsection[{isRegValidAndReady}]{\setlength{\rightskip}{0pt plus 5cm}bool registerFile::isRegValidAndReady (
\begin{DoxyParamCaption}
\item[{{\bf PR}}]{reg}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a6b9481a788749aabdc8488f60adb5cf7}


NOTE: only works for INO 


\begin{DoxyCode}
                                             {
#ifdef ASSERTION
    Assert (reg >= _rf_begin_num && reg <= _rf_end_num);
#endif
    if (_RF[reg]->_axesedBefore == true) {
#ifdef ASSERTION
        Assert (_RF[reg]->_reg_state != NO_VAL_REG && 
                "Register must hold data to read from - call updateReg () first")
      ;
#endif
    } else {
        _RF[reg]->_axesedBefore = true;
        if (_RF[reg]->_reg_state == NO_VAL_REG)
            _RF[reg]->_reg_state = DONE_WRITE_REG; 
    }
    return _RF[reg]->_reg_state == DONE_WRITE_REG ? true : false;
}
\end{DoxyCode}


Here is the caller graph for this function:


\hypertarget{classregisterFile_a2731695462957c3ac0a8888e7fce3bd3}{
\index{registerFile@{registerFile}!reserveReg@{reserveReg}}
\index{reserveReg@{reserveReg}!registerFile@{registerFile}}
\subsubsection[{reserveReg}]{\setlength{\rightskip}{0pt plus 5cm}void registerFile::reserveReg (
\begin{DoxyParamCaption}
\item[{{\bf PR}}]{reg}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a2731695462957c3ac0a8888e7fce3bd3}

\begin{DoxyCode}
                                     {
#ifdef ASSERTION
    Assert (reg >= _rf_begin_num && reg <= _rf_end_num);
    if (!(_RF[reg]->_reg_state == DONE_WRITE_REG || _RF[reg]->_reg_state == 
      NO_VAL_REG)) 
        cout << _RF[reg]->_reg_state;
    Assert (_RF[reg]->_reg_state == DONE_WRITE_REG || _RF[reg]->_reg_state == 
      NO_VAL_REG);
#endif
    _RF[reg]->_reg_state = WAIT_ON_WRITE_REG;
}
\end{DoxyCode}


Here is the caller graph for this function:


\hypertarget{classregisterFile_a9e487acbcecb5a905a4ee1c80adf48e4}{
\index{registerFile@{registerFile}!resetRF@{resetRF}}
\index{resetRF@{resetRF}!registerFile@{registerFile}}
\subsubsection[{resetRF}]{\setlength{\rightskip}{0pt plus 5cm}void registerFile::resetRF (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a9e487acbcecb5a905a4ee1c80adf48e4}

\begin{DoxyCode}
                            {
    map<PR, registerElement*>::iterator it;
    for (it = _RF.begin(); it != _RF.end(); it++) {
        (*it).second->resetReg ();
    }
}
\end{DoxyCode}


Here is the caller graph for this function:


\hypertarget{classregisterFile_a57aa14508810da286ee60ef6cd033d6b}{
\index{registerFile@{registerFile}!updateReg@{updateReg}}
\index{updateReg@{updateReg}!registerFile@{registerFile}}
\subsubsection[{updateReg}]{\setlength{\rightskip}{0pt plus 5cm}void registerFile::updateReg (
\begin{DoxyParamCaption}
\item[{{\bf PR}}]{reg}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a57aa14508810da286ee60ef6cd033d6b}

\begin{DoxyCode}
                                    {
#ifdef ASSERTION
    Assert (reg >= _rf_begin_num && reg <= _rf_end_num);
    Assert (_RF[reg]->_reg_state == WAIT_ON_WRITE_REG);
#endif
    _RF[reg]->_reg_state = DONE_WRITE_REG;
}
\end{DoxyCode}


Here is the caller graph for this function:


\hypertarget{classregisterFile_a47232ba732ea081d78cd43d0564e60a1}{
\index{registerFile@{registerFile}!updateWireState@{updateWireState}}
\index{updateWireState@{updateWireState}!registerFile@{registerFile}}
\subsubsection[{updateWireState}]{\setlength{\rightskip}{0pt plus 5cm}void registerFile::updateWireState (
\begin{DoxyParamCaption}
\item[{{\bf AXES\_\-TYPE}}]{axes\_\-type, }
\item[{list$<$ string $>$}]{wire\_\-name = {\ttfamily list$<$string$>$()}, }
\item[{bool}]{update\_\-wire = {\ttfamily false}}
\end{DoxyParamCaption}
)}}
\label{classregisterFile_a47232ba732ea081d78cd43d0564e60a1}

\begin{DoxyCode}
                                                                                 
                      {
    CYCLE now = _clk->now ();
    if (_cycle < now) {
        _wr_port.updateWireState (wire_name, axes_type == WRITE ? update_wire : f
      alse);
        _rd_port.updateWireState (wire_name, axes_type == READ ? update_wire : fa
      lse);
        _cycle = now;
    } else if (_cycle == now) {
        if (axes_type == READ)
            _rd_port.updateWireState (wire_name, update_wire);
        else
            _wr_port.updateWireState (wire_name, update_wire);
    }
}
\end{DoxyCode}


Here is the call graph for this function:




Here is the caller graph for this function:




The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/home/milad/esc\_\-project/svn/PARS/src/backend/unit/\hyperlink{registerFile_8h}{registerFile.h}\item 
/home/milad/esc\_\-project/svn/PARS/src/backend/unit/\hyperlink{registerFile_8cpp}{registerFile.cpp}\end{DoxyCompactItemize}
