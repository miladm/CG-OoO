<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PhArS: /home/milad/esc_project/svn/PARS/src/lib/utility.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PhArS&#160;<span id="projectnumber">1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">/home/milad/esc_project/svn/PARS/src/lib/utility.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
</div>
<p><a href="lib_2utility_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2utility_8h.html#aab1e54dcc40192f9704e8b252635450f">Assert</a>(expr)&#160;&#160;&#160;((expr) ? (void)0 : Failure(&quot;Assertion Failed: %s, line %d:\n    %s&quot;, __FILE__, __LINE__, #expr))</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2utility_8h.html#af9857b7ce67739b0c36e49ad70c1befa">Failure</a> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2utility_8h.html#a792c588e9321d93476dec66f6cdd53a3">PrintDebug</a> (const char *key, const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2utility_8h.html#a5adfde7c853956a87b33ff8f2b3effc2">SetDebugForKey</a> (const char *key, bool val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2utility_8h.html#a07f87be0a7c65a41d29ddfca31d0cb89">IsDebugOn</a> (const char *key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lib_2utility_8h.html#afdda6d1c4184e16b014a78ae53ddf958">ParseCommandLine</a> (int argc, char *argv[])</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aab1e54dcc40192f9704e8b252635450f"></a><!-- doxytag: member="utility.h::Assert" ref="aab1e54dcc40192f9704e8b252635450f" args="(expr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Assert</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">expr</td><td>)</td>
          <td>&#160;&#160;&#160;((expr) ? (void)0 : Failure(&quot;Assertion Failed: %s, line %d:\n    %s&quot;, __FILE__, __LINE__, #expr))</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Macro: <a class="el" href="lib_2utility_8h.html#aab1e54dcc40192f9704e8b252635450f">Assert()</a> Usage: <a class="el" href="lib_2utility_8h.html#aab1e54dcc40192f9704e8b252635450f">Assert(num &gt; 0)</a>; ---------------------- This macro is designed to assert the truth of a necessary condition. It tests the given expression, and if it evalutes true, nothing happens. If it is false, it calls Failure to print a message and abort. For example: Assert(ptr != NULL) will print something similar to the following if ptr is NULL: *** Failure: Assertion failed: hashtable.cc, line 55: ptr != NULL </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af9857b7ce67739b0c36e49ad70c1befa"></a><!-- doxytag: member="utility.h::Failure" ref="af9857b7ce67739b0c36e49ad70c1befa" args="(const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Failure </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: <a class="el" href="backend_2utility_8cpp.html#af9857b7ce67739b0c36e49ad70c1befa">Failure()</a> Usage: Failure("Out of memory!"); -------------------------------- Reports an error and exits the program immediately. You should not need to call this since you should always try to continue parsing, even after an error is encountered. Some of the provided code calls this in unrecoverable error situations (cannot allocate memory, etc.) Failure accepts printf-style arguments in the message to be printed. </p>
<div class="fragment"><pre class="fragment">                                      {
  va_list args;
  <span class="keywordtype">char</span> errbuf[BufferSize];
  
  va_start(args, format);
  vsprintf(errbuf, format, args);
  va_end(args);
  fflush(stdout);
  fprintf(stderr,<span class="stringliteral">&quot;\n*** Failure: %s\n\n&quot;</span>, errbuf);
  abort();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07f87be0a7c65a41d29ddfca31d0cb89"></a><!-- doxytag: member="utility.h::IsDebugOn" ref="a07f87be0a7c65a41d29ddfca31d0cb89" args="(const char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IsDebugOn </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: <a class="el" href="backend_2utility_8cpp.html#a07f87be0a7c65a41d29ddfca31d0cb89">IsDebugOn()</a> Usage: if (IsDebugOn("scope")) ... ---------------------------------- Return true/false based on whether this key is currently on for debug printing. </p>
<div class="fragment"><pre class="fragment">                                {
  <span class="keywordflow">return</span> (<a class="code" href="backend_2utility_8cpp.html#a1c69ab96e321f1380c00507b146ddef5">IndexOf</a>(key) != -1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afdda6d1c4184e16b014a78ae53ddf958"></a><!-- doxytag: member="utility.h::ParseCommandLine" ref="afdda6d1c4184e16b014a78ae53ddf958" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ParseCommandLine </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: ParseCommandLine -------------------------- Turn on the debugging flags from the command line. Verifies that first argument is -d, and then interpret all the arguments that follow as being flags to turn on. </p>
<div class="fragment"><pre class="fragment">                                              {
  <span class="keywordflow">if</span> (argc == 1)
    <span class="keywordflow">return</span>;
  
  <span class="keywordflow">if</span> (strcmp(argv[1], <span class="stringliteral">&quot;-d&quot;</span>) != 0) { <span class="comment">// first arg is not -d</span>
    printf(<span class="stringliteral">&quot;Incorrect Use:   &quot;</span>);
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; argc; i++) printf(<span class="stringliteral">&quot;%s &quot;</span>, argv[i]);
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    printf(<span class="stringliteral">&quot;Correct Usage:   -d &lt;debug-key-1&gt; &lt;debug-key-2&gt; ... \n&quot;</span>);
    exit(2);
  }

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt; argc; i++)
    <a class="code" href="backend_2utility_8cpp.html#a34c8948d2a64f846bb064b02016ec243">SetDebugForKey</a>(argv[i], <span class="keyword">true</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a792c588e9321d93476dec66f6cdd53a3"></a><!-- doxytag: member="utility.h::PrintDebug" ref="a792c588e9321d93476dec66f6cdd53a3" args="(const char *key, const char *format,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrintDebug </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: <a class="el" href="backend_2utility_8cpp.html#a792c588e9321d93476dec66f6cdd53a3">PrintDebug()</a> Usage: PrintDebug("parser", "found ident %s\n", ident); ------------------------------------------------------- Print a message if we have turned debugging messages on for the given key. For example, the usage line shown above will only print a message if the call is preceded by a call to SetDebugForKey("parser",true). The function accepts printf arguments. The provided main.cc parses the command line to turn on debug flags. </p>
<div class="fragment"><pre class="fragment">                                                          {
  va_list args;
  <span class="keywordtype">char</span> buf[BufferSize];

  <span class="keywordflow">if</span> (!<a class="code" href="backend_2utility_8cpp.html#a07f87be0a7c65a41d29ddfca31d0cb89">IsDebugOn</a>(key))
     <span class="keywordflow">return</span>;
  
  va_start(args, format);
  vsprintf(buf, format, args);
  va_end(args);
  printf(<span class="stringliteral">&quot;+++ (%s): %s%s&quot;</span>, key, buf, buf[strlen(buf)-1] != <span class="charliteral">&#39;\n&#39;</span>? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5adfde7c853956a87b33ff8f2b3effc2"></a><!-- doxytag: member="utility.h::SetDebugForKey" ref="a5adfde7c853956a87b33ff8f2b3effc2" args="(const char *key, bool val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetDebugForKey </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: <a class="el" href="backend_2utility_8cpp.html#a34c8948d2a64f846bb064b02016ec243">SetDebugForKey()</a> Usage: SetDebugForKey("scope", true); ------------------------------------- Turn on debugging messages for the given key. See PrintDebug for an example. Can be called manually when desired and will be called from the provided main for flags passed with -d. </p>
<div class="fragment"><pre class="fragment">                                                 {
  <span class="keywordtype">int</span> k = <a class="code" href="backend_2utility_8cpp.html#a1c69ab96e321f1380c00507b146ddef5">IndexOf</a>(key);
  <span class="keywordflow">if</span> (!value &amp;&amp; k != -1)
    debugKeys.erase(debugKeys.begin() + k);
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &amp;&amp; k == -1)
    debugKeys.push_back(key);
}
</pre></div>
</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Jul 18 2014 for PhArS by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
